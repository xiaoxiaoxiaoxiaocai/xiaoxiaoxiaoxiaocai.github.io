### 文件分割

#### 文件识别

1.file命令

可以再kali中利用file看一些没有后缀的文件.



2.可以利用010Editor

可以看文件头以及文件尾部

文件头

|        文件类型        |     文件头     |
| :--------------------: | :------------: |
|       JPEG(jpg)        |    FFD8FFE1    |
|        PNG(png)        |    89504E47    |
|       GIF (gif)        |    47494638    |
|       TIFF (tif)       |    49492A00    |
|  Windows Bitmap (bmp)  |    424DC001    |
|   ZIP Archive (zip)    |    504B0304    |
|   RAR Archive (rar)    |    52617221    |
| Adobe Photoshop (psd)  |    38425053    |
| Rich Text Format (rtf) |   7B5C727466   |
|       XML (xml)        |   3C3F786D6C   |
|  Adobe Acrobat (pdf)   | 355044462D312E |
|      Wave （wav）      |    57415645    |
|      pcap (pacp)       |    4D3C2B1A    |

一些常见文件尾部

- zip文件尾部以一串504B0506开始
- rar文件以C 43DB00400700结尾
- JPG文件结尾的FFD9
- PNG文件 结尾为000049454E44AE426082
- Gif文件结尾为3B



#### 文件分离 

文件分离有许多方法。

#####  Binwalk

是一个自动提取文件系统，该工具可以自动完成指定文件的扫描，发现潜藏在文件中中所有可疑的文件类型以及文件系统。

binwalk +file 扫描发现目标文件中包含的所有可识别的文件类型

binwalk +file -e 提取文件

提取成功的话则会生成一个文件名extracted目录，目录中存放的就是提取的文件

##### foremost

foremost是基于文件开始格式，文件结束标志和内部数据结构进行恢复文件的程序。该工具通过分析不同类型文件的头、尾和内部数据结构，同镜像文件的数据进行比对，以还原文件。它默认支持19种类型文件的恢复。用户还可以通过配置文件扩展支持其他文件类型。

有时候binwalk无法正确分离出文件，这时候就可以使用foremost，将目标文件复制到kali中，在终端中使用命令行进入文件所在文件夹，使用如下命令：
Foremost+file –o 输出目录名。

foremost分离得到的文件存放在output文件夹下

成功后可以再目标文件目录下生成我们设置的目录

##### dd

该工具是自动化分离工具，用在当题目文件包含其他文件时，可以把其他文件分离出来的一款工具。

dd if=源文件名 bs=1 skip=开始分离的字节数 of=目标文件名

参数说明

if=file    输入文件名，缺省为标准输入

of=file    输出文件名，缺省为标准输出

bs=bytes    同时设置读写块的大小为bytes，可代替ibs和obs。

skip=blocks    从输入文件开头跳过blocks个块后再开始复制

##### fcrackzip

是一款专门破解zip类行压缩文件密码工具

-b ---表示使用暴力破解的方法

-c ---'aA1'表示使用大小写字母和数字混合破解方式

-l  ---1-10表示需要破解的密码长度为1-10位

-u ---表示只显示破解出来的密码，其他错误密码不显示

使用字典爆破：

fcrackzip -D -p /usr/share/wp -u ????.zip

-D ---使用字典爆破
-p ---使用哪一个字典，后跟上路径或者字典的名字

##### zsteg

zsteg可以检测PNG和BMP图片里的隐写数据。

检测：

zsteg + 图片 

导出内容：

zsteg -E "b1,bgr,lsb,xy" pcat.png > p.exe

#### 文件合并  

###### Linux下的合并

cat是linux系统下的一个能提取文件的内容的命令，使用cat命令将文件内容提取出来再导入目标文件

cat test1 test2 test3 > book

将 test1 test2 test3合并到book文件中.

------

cat test* > book

将test开头的所有文件按文件名从小到大的顺序合并，输出的book文件中。

------

md5sum 文件名

MD5加密

###### Windows下的合并

copy /B test1.txt+test2.txt+test3.txt book.txt

从左到右的顺序合并，输出book.txt

------

copy /B test.txt* book.txt

从小到大的顺序合并，输出book.txt

------

certutil -hashfile 文件名 md5

MD5加密

